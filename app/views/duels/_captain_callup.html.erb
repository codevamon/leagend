<%# app/views/duels/_captain_callup.html.erb %>
<turbo-frame id="captain_callup_section">
  <div class="card mb-4">
    <div class="card-header">
      <h5 class="mb-0">
        <i class="fas fa-crown me-2 text-warning"></i>Capitán del Equipo
      </h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6 col-lg-4">
          <div class="card h-100 border-warning">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title mb-1">
                    <%= team.captain.firstname %>
                    <span class="badge bg-warning">
                      <i class="fas fa-crown me-1"></i>Capitán
                    </span>
                  </h6>
                  <small class="text-muted">Creador del equipo</small>
                </div>
                <div>
                  <% status = captain_callup_status(duel, team) %>
                  <% if status == 'confirmed' %>
                    <span class="badge <%= captain_callup_badge_class(status) %>">
                      <i class="<%= captain_callup_icon(status) %> me-1"></i>Confirmado
                    </span>
                  <% else %>
                    <%= button_to self_callup_captain_duel_path(duel), 
                        method: :post, 
                        class: "btn btn-outline-primary btn-sm",
                        form: { data: { turbo_frame: "captain_callup_section" } } do %>
                      <i class="<%= captain_callup_icon(status) %> me-1"></i>
                      <%= status == 'pending' ? 'Pendiente' : 'Autoconvocarme' %>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</turbo-frame>